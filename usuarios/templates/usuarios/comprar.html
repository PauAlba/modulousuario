<!-- <!DOCTYPE html>
<html lang="es">
<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'usuarios/styles.css' %}">
    <meta charset="UTF-8">
    <title>Realizar compra</title>
</head>
<body>

<div class="container">
    <h2>Realizar compra</h2>

    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Comprar</button>
    </form>

    <a class="secondary" href="{% url 'usuarios:perfil' %}">Volver al perfil</a>
</div>

</body>
</html> -->
<!DOCTYPE html>
<html lang="es">
<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'usuarios/styles.css' %}">
    <meta charset="UTF-8">
    <title>Realizar compra</title>
</head>
<body>

<div class="container">

    <h2>Comprar productos</h2>

    <!-- Filtros -->
    <form method="get" class="filter-form">
        <input 
            type="text" 
            name="search" 
            placeholder="Buscar por nombre..." 
            value="{{ search }}"
        >

        <select name="categoria">
            <option value="">Todas las categorías</option>
            {% for cat in categorias %}
                <option value="{{ cat }}" {% if categoria == cat %}selected{% endif %}>
                    {{ cat }}
                </option>
            {% endfor %}
        </select>

        <button type="submit">Filtrar</button>
    </form>

    <hr>

    <!-- Lista de productos -->
    <div class="productos-lista">

        {% for producto in productos %}
            <div class="producto-card">
                <h3>{{ producto.nombre }}</h3>

                <p><strong>Categoría:</strong> {{ producto.categoria }}</p>

                {% if producto.descripcion %}
                    <p>{{ producto.descripcion }}</p>
                {% endif %}

                <p><strong>Precio:</strong> ${{ producto.costo }}</p>

                <!-- Formulario para comprar -->
                <form method="post" class="compra-form">
                    {% csrf_token %}
                    <input type="hidden" name="producto_id" value="{{ producto.id }}">

                    <label>Cantidad:</label>
                    <input 
                        type="number" 
                        name="cantidad" 
                        value="1" 
                        min="1" 
                        required
                    >

                    <button type="submit">Comprar</button>
                </form>
            </div>

        {% empty %}
            <p>No se encontraron productos.</p>
        {% endfor %}
    </div>

    <br>
    <a class="secondary" href="{% url 'usuarios:perfil' %}">Volver al perfil</a>

</div>

</body>
</html>
